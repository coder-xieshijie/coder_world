![å¯¹è±¡å¼•ç”¨](https://coder-xieshijie-img-1253784930.cos.ap-beijing.myqcloud.com/img/2024/å¯¹è±¡å¼•ç”¨_3a17300dab71fbcea29bb38fca3ba04f.jpg)



> å“ˆå–½ï¼Œå¤§å®¶å¥½ğŸ‰ï¼Œæˆ‘æ˜¯**ä¸–æ°**ã€‚
>
>
> æœ¬æ–‡æˆ‘ä¸ºå¤§å®¶ä»‹ç»é¢è¯•å®˜ç»å¸¸è€ƒå¯Ÿçš„**ã€ŒJavaå¯¹è±¡å¼•ç”¨ç›¸å…³å†…å®¹ã€**



ç…§ä¾‹åœ¨å¼€å¤´ç•™ä¸€äº›é¢è¯•è€ƒå¯Ÿå†…å®¹~~

### é¢è¯•è¿ç¯call

1. Javaå¯¹è±¡å¼•ç”¨éƒ½æœ‰å“ªäº›ç±»å‹?
2. Javaå‚æ•°ä¼ é€’æ˜¯å€¼ä¼ é€’è¿˜æ˜¯å¼•ç”¨ä¼ é€’? ä¸ºä»€ä¹ˆ?
3. Javaå¯¹è±¡å¼•ç”¨è®¿é—®æ–¹å¼æœ‰å“ªäº›?



ä¸Šä¸€ç¯‡æ–‡ç« è®²äº† JVM åœ¨æ‰§è¡Œ new å¯¹è±¡çš„è¿‡ç¨‹ä¸­éƒ½æ‰§è¡Œäº†é‚£äº›æ“ä½œã€‚ç°åœ¨æˆ‘æ¥è®²ä¸€ä¸‹åˆ›å»ºå¯¹è±¡ä¹‹åçš„çš„ä½¿ç”¨

## 1. Javaå¯¹è±¡å¼•ç”¨



> ã€ŠJavaç¼–ç¨‹æ€æƒ³ã€‹ï¼š æ¯ç§ç¼–ç¨‹è¯­è¨€éƒ½æœ‰è‡ªå·±çš„æ•°æ®å¤„ç†æ–¹å¼ã€‚æœ‰äº›æ—¶å€™ï¼Œç¨‹åºå‘˜å¿…é¡»æ³¨æ„å°†è¦å¤„ç†çš„æ•°æ®æ˜¯ä»€ä¹ˆç±»å‹ã€‚ä½ æ˜¯ç›´æ¥æ“çºµå…ƒç´ ï¼Œè¿˜æ˜¯ç”¨æŸç§åŸºäºç‰¹æ®Šè¯­æ³•çš„é—´æ¥è¡¨ç¤ºï¼ˆä¾‹å¦‚C/C++é‡Œçš„æŒ‡é’ˆï¼‰æ¥æ“ä½œå¯¹è±¡ã€‚æ‰€æœ‰è¿™äº›åœ¨ Java é‡Œéƒ½å¾—åˆ°äº†ç®€åŒ–ï¼Œ**ä¸€åˆ‡éƒ½è¢«è§†ä¸ºå¯¹è±¡**ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯é‡‡ç”¨ä¸€ç§ç»Ÿä¸€çš„è¯­æ³•ã€‚å°½ç®¡å°†ä¸€åˆ‡éƒ½â€œçœ‹ä½œâ€å¯¹è±¡ï¼Œä½†æ“çºµçš„æ ‡è¯†ç¬¦å®é™…æ˜¯æŒ‡å‘ä¸€ä¸ª**å¯¹è±¡çš„â€œå¼•ç”¨â€ï¼ˆreferenceï¼‰**ã€‚



Javaç¨‹åºéœ€è¦é€šè¿‡**æ ˆä¸Šçš„å¼•ç”¨æ•°æ®**æ¥æ“ä½œ**å †ä¸Šçš„å…·ä½“å¯¹è±¡**ã€‚å¯¹è±¡çš„è®¿é—®æ–¹å¼å–å†³äºè™šæ‹Ÿæœºå®ç°ï¼Œç›®å‰ä¸»æµçš„è®¿é—®æ–¹å¼æœ‰ä½¿ç”¨å¥æŸ„å’Œç›´æ¥æŒ‡é’ˆä¸¤ç§ã€‚

- **ç›´æ¥æŒ‡é’ˆ**ï¼šæŒ‡å‘å¯¹è±¡ï¼Œä»£è¡¨å¯¹è±¡çš„å†…å­˜åœ°å€ã€‚
- **å¥æŸ„**ï¼šå¥æŸ„æ˜¯ä¸€ç§ç‰¹æ®Šçš„æŒ‡é’ˆï¼Œå¯ä»¥ç†è§£ä¸ºæŒ‡å‘æŒ‡é’ˆçš„æŒ‡é’ˆï¼Œç»´æŠ¤æŒ‡å‘å¯¹è±¡çš„æŒ‡é’ˆå˜åŒ–ï¼Œè€Œå¯¹è±¡çš„å¥æŸ„æœ¬èº«ä¸å‘ç”Ÿå˜åŒ–

### 1.1 ç›´æ¥æŒ‡é’ˆ

å¦‚æœä½¿ç”¨ç›´æ¥æŒ‡é’ˆè®¿é—®ï¼Œé‚£ä¹ˆJavaå †å¯¹è±¡çš„å¸ƒå±€ä¸­å°±å¿…é¡»è€ƒè™‘å¦‚ä½•æ”¾ç½®**è®¿é—®ç±»å‹æ•°æ®çš„ç›¸å…³ä¿¡æ¯**ï¼Œè€Œå¼•ç”¨ä¸­å­˜å‚¨çš„ç›´æ¥å°±æ˜¯**å¯¹è±¡åœ°å€**ã€‚

- **ä¼˜åŠ¿**ï¼šé€Ÿåº¦æ›´å¿«ï¼ŒèŠ‚çœäº†ä¸€æ¬¡æŒ‡é’ˆå®šä½çš„æ—¶é—´å¼€é”€ã€‚å½“å¯¹è±¡çš„è®¿é—®éå¸¸é¢‘ç¹ï¼Œæ­¤å¼€é”€ç§¯ä¹Ÿå¯èŠ‚çœéå¸¸å¯è§‚çš„æˆæœ¬ã€‚

![img](https://coder-xieshijie-img-1253784930.cos.ap-beijing.myqcloud.com/img/2024/2443180-20211126100056767-1083651541-20240707123734735_2496ba2cca025017ac1eb48d53e3befa.png)



### 1.2 å¥æŸ„

Javaå †ä¸­åˆ’åˆ†å‡ºä¸€å—å†…å­˜æ¥ä½œä¸º**å¥æŸ„æ± **ï¼Œå¼•ç”¨ä¸­å­˜å‚¨å¯¹è±¡çš„å¥æŸ„åœ°å€ï¼Œè€Œå¥æŸ„ä¸­åŒ…å«äº†å¯¹è±¡**å®ä¾‹æ•°æ®**ä¸**ç±»å‹æ•°æ®**å„è‡ªçš„å…·ä½“åœ°å€ä¿¡æ¯ã€‚

- ä¼˜åŠ¿ï¼šå¼•ç”¨ä¸­å­˜å‚¨çš„æ˜¯ç¨³å®šçš„å¥æŸ„åœ°å€ï¼Œåœ¨**å¯¹è±¡è¢«ç§»åŠ¨**(åƒåœ¾æ”¶é›†æ—¶ç§»åŠ¨å¯¹è±¡æ˜¯éå¸¸æ™®éçš„è¡Œä¸º)æ—¶åªä¼šæ”¹å˜å¥æŸ„ä¸­çš„å®ä¾‹æ•°æ®æŒ‡é’ˆï¼Œè€Œå¼•ç”¨**æœ¬èº«ä¸éœ€è¦ä¿®æ”¹**ã€‚
- ç¼ºç‚¹ï¼šéœ€è¦**ä¸¤æ¬¡æŒ‡é’ˆè®¿é—®**æ‰èƒ½è®¿é—®åˆ°å¯¹è±¡æ•°æ®ã€‚

![img](https://coder-xieshijie-img-1253784930.cos.ap-beijing.myqcloud.com/img/2024/2443180-20211126095946429-579451745_006729e3eae2908d3455bc70603a7abb.png)



-----



## 2. å¯¹è±¡å¼•ç”¨ç±»å‹



> åœ¨Javaä¸­ä¸€å…±æœ‰å››ç§å¼•ç”¨ç±»å‹ï¼Œåˆ†ä¸ºäº†ï¼š**å¼ºå¼•ç”¨ï¼ˆStrong Referenceï¼‰ã€è½¯å¼•ç”¨ï¼ˆSoft Referenceï¼‰ã€å¼±å¼•ç”¨ï¼ˆWeak Referenceï¼‰ã€è™šå¼•ç”¨ï¼ˆPhantom Referenceï¼‰4 ç§**ï¼Œè¿™ 4 ç§å¼•ç”¨çš„å¼ºåº¦ä¾æ¬¡å‡å¼±ã€‚



### 2.1 å¼ºå¼•ç”¨

> å¼ºå¼•ç”¨æ˜¯æœ€å¸¸è§çš„å¼•ç”¨ç±»å‹ã€‚

- å½“æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå¯¹è±¡å¹¶å°†å…¶èµ‹å€¼ç»™ä¸€ä¸ªå¼•ç”¨å˜é‡æ—¶ï¼Œè¿™ä¸ªå¼•ç”¨å°±è¢«ç§°ä¸ºå¼ºå¼•ç”¨ã€‚åªè¦å¼ºå¼•ç”¨å­˜åœ¨ï¼Œ**åƒåœ¾å›æ”¶å™¨å°±ä¸ä¼šå›æ”¶è¢«å¼•ç”¨çš„å¯¹è±¡**ã€‚å³ä½¿ç³»ç»Ÿå†…å­˜ç©ºé—´ä¸è¶³ï¼ŒJVMå®æ„¿æŠ›å‡º**OutOfMemoryError**é”™è¯¯ï¼Œä½¿ç¨‹åºå¼‚å¸¸ç»ˆæ­¢ï¼Œä¹Ÿä¸ä¼šé éšæ„å›æ”¶å…·æœ‰å¼ºå¼•ç”¨çš„å­˜æ´»å¯¹è±¡æ¥è§£å†³å†…å­˜ä¸è¶³é—®é¢˜ã€‚
- å¼ºå¼•ç”¨çš„ç‰¹æ€§æ˜¯åªè¦æœ‰å¼ºå¼•ç”¨å­˜åœ¨ï¼Œè¢«å¼•ç”¨çš„å¯¹è±¡å°±ä¸ä¼šè¢«åƒåœ¾å›æ”¶ã€‚
- å¯ä»¥å°†å¼ºå¼•ç”¨èµ‹å€¼ä¸º nullï¼Œè¿™æ ·ä¸€æ¥ï¼ŒJVM å°±å¯ä»¥é€‚æ—¶çš„å›æ”¶å¯¹è±¡äº†(**æ³¨æ„ä¸æ˜¯ç«‹åˆ»å›æ”¶**)

```java
public class StrongReferenceUsage {

    @Test
    public void stringReference(){
        Object obj = new Object();
    }
}
```

ä¸Šé¢æˆ‘ä»¬newäº†ä¸€ä¸ªObjectå¯¹è±¡ï¼Œå¹¶å°†å…¶èµ‹å€¼ç»™objï¼Œè¿™ä¸ªobjå°±æ˜¯new Object()çš„å¼ºå¼•ç”¨ã€‚





### 2.2 è½¯å¼•ç”¨

> è½¯å¼•ç”¨æ˜¯ç”¨æ¥æè¿°ä¸€äº›è¿˜æœ‰ç”¨ä½†å¹¶éå¿…éœ€çš„å¯¹è±¡ã€‚

- å¯¹äºè½¯å¼•ç”¨å…³è”ç€çš„å¯¹è±¡ï¼Œåœ¨ç³»ç»Ÿå°†è¦**å‘ç”Ÿå†…å­˜æº¢å‡ºå¼‚å¸¸å‰**ï¼Œå°†ä¼šæŠŠè¿™äº›å¯¹è±¡åˆ—è¿›å›æ”¶èŒƒå›´è¿›è¡Œ**ç¬¬äºŒæ¬¡å›æ”¶**ã€‚å¦‚æœè¿™æ¬¡å›æ”¶è¿˜æ²¡æœ‰è¶³å¤Ÿçš„å†…å­˜ï¼Œæ‰ä¼šæŠ›å‡ºå†…å­˜æº¢å‡ºå¼‚å¸¸ã€‚åœ¨Javaä¸­ï¼Œè½¯å¼•ç”¨é€šè¿‡**java.lang.ref.SoftReference**ç±»æ¥å®ç°ã€‚

- è¿™ç§ç‰¹æ€§å¸¸å¸¸è¢«ç”¨æ¥å®ç°**ç¼“å­˜æŠ€æœ¯**ï¼Œæ¯”å¦‚ç½‘é¡µç¼“å­˜ï¼Œå›¾ç‰‡ç¼“å­˜ç­‰ã€‚

```java
    @Test
    public void softReference(){
        Object obj = new Object();
        SoftReference<Object> soft = new SoftReference<>(obj);
        obj = null;
        log.info("{}",soft.get());
        System.gc();
        log.info("{}",soft.get());
    }
```

è¾“å‡ºç»“æœï¼š

```
22:50:43.733 [main] INFO com.flydean.SoftReferenceUsage - java.lang.Object@71bc1ae4
22:50:43.749 [main] INFO com.flydean.SoftReferenceUsage - java.lang.Object@71bc1ae4
```

å¯ä»¥çœ‹åˆ°åœ¨å†…å­˜å……è¶³çš„æƒ…å†µä¸‹ï¼ŒSoftReferenceå¼•ç”¨çš„å¯¹è±¡æ˜¯ä¸ä¼šè¢«å›æ”¶çš„ã€‚



### 2.3 å¼±å¼•ç”¨

> å¼±å¼•ç”¨ä¹Ÿæ˜¯ç”¨æ¥æè¿°éå¿…éœ€å¯¹è±¡çš„ï¼Œä¸è¿‡å®ƒçš„å¼ºåº¦æ¯”è½¯å¼•ç”¨æ›´å¼±ä¸€äº›ã€‚

- è¢«å¼±å¼•ç”¨å…³è”çš„å¯¹è±¡åªèƒ½ç”Ÿå­˜åˆ°**ä¸‹ä¸€æ¬¡åƒåœ¾æ”¶é›†å‘ç”Ÿä¹‹å‰**ã€‚å½“åƒåœ¾æ”¶é›†å™¨å·¥ä½œæ—¶ï¼Œæ— è®ºå½“å‰å†…å­˜æ˜¯å¦è¶³å¤Ÿï¼Œéƒ½ä¼šå›æ”¶è¢«å¼±å¼•ç”¨çš„å¯¹è±¡ã€‚

- åœ¨Javaä¸­ï¼Œå¼±å¼•ç”¨é€šè¿‡**java.lang.ref.WeakReference**ç±»æ¥å®ç°ã€‚

```java
    @Test
    public void weakReference() throws InterruptedException {
        Object obj = new Object();
        WeakReference<Object> weak = new WeakReference<>(obj);
        obj = null;
        log.info("{}",weak.get());
        System.gc();
        log.info("{}",weak.get());
    }
```

è¾“å‡ºç»“æœï¼š

```
22:58:02.019 [main] INFO com.flydean.WeakReferenceUsage - java.lang.Object@71bc1ae4
22:58:02.047 [main] INFO com.flydean.WeakReferenceUsage - null
```

å¯ä»¥çœ‹åˆ°å³ä¾¿åœ¨å†…å­˜å……è¶³çš„æƒ…å†µä¸‹ï¼ŒWeakReferenceå¼•ç”¨çš„å¯¹è±¡ä¹Ÿè¢«å›æ”¶äº†ã€‚

  

### 2.4 è™šå¼•ç”¨

> è™šå¼•ç”¨æ˜¯æœ€å¼±çš„ä¸€ç§å¼•ç”¨å…³ç³»ã€‚

- ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æœ‰è™šå¼•ç”¨çš„å­˜åœ¨ï¼Œå®Œå…¨ä¸ä¼šå¯¹å…¶ç”Ÿå­˜æ—¶é—´æ„æˆå½±å“ï¼Œä¹Ÿ**æ— æ³•é€šè¿‡è™šå¼•ç”¨æ¥å–å¾—ä¸€ä¸ªå¯¹è±¡å®ä¾‹**ã€‚
- ä¸ºä¸€ä¸ªå¯¹è±¡è®¾ç½®è™šå¼•ç”¨çš„å”¯ä¸€ç›®çš„å°±æ˜¯èƒ½åœ¨**è¿™ä¸ªå¯¹è±¡è¢«æ”¶é›†å™¨å›æ”¶æ—¶æ”¶åˆ°ä¸€ä¸ªç³»ç»Ÿé€šçŸ¥**ã€‚
- åœ¨Javaä¸­ï¼Œè™šå¼•ç”¨é€šè¿‡**java.lang.ref.PhantomReference**ç±»æ¥å®ç°ã€‚
- è™šå¼•ç”¨å¿…é¡»å’Œ**å¼•ç”¨é˜Ÿåˆ—**ï¼ˆReferenceQueueï¼‰è”åˆä½¿ç”¨



PhantomReferenceçš„ä½œç”¨æ˜¯**è·Ÿè¸ªåƒåœ¾å›æ”¶å™¨æ”¶é›†å¯¹è±¡çš„æ´»åŠ¨**ï¼Œåœ¨GCçš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœå‘ç°æœ‰PhantomReferenceï¼ŒGCåˆ™ä¼šå°†å¼•ç”¨æ”¾åˆ°ReferenceQueueä¸­ï¼Œç”±ç¨‹åºå‘˜è‡ªå·±å¤„ç†ï¼Œå½“ç¨‹åºå‘˜è°ƒç”¨ReferenceQueue.pull()æ–¹æ³•ï¼Œå°†å¼•ç”¨é˜Ÿåˆ—ä¸­çš„å¯¹è±¡å¼•ç”¨ç§»é™¤ä¹‹åï¼ŒReferenceå¯¹è±¡ä¼šå˜æˆ**Inactive**çŠ¶æ€ï¼Œæ„å‘³ç€è¢«å¼•ç”¨çš„**å¯¹è±¡å¯ä»¥è¢«å›æ”¶**äº†ã€‚

```java
@Slf4j
public class PhantomReferenceUsage {

    @Test
    public void usePhantomReference(){
        ReferenceQueue<Object> rq = new ReferenceQueue<>();
        Object obj = new Object();
        PhantomReference<Object> phantomReference = new PhantomReference<>(obj,rq);
        obj = null;
        log.info("{}",phantomReference.get());
        System.gc();
        Reference<Object> r = (Reference<Object>)rq.poll();
        log.info("{}",r);
    }
}
```

è¾“å‡ºç»“æœï¼š

```
07:06:46.336 [main] INFO com.flydean.PhantomReferenceUsage - null
07:06:46.353 [main] INFO com.flydean.PhantomReferenceUsage - java.lang.ref.PhantomReference@136432db
```

æˆ‘ä»¬çœ‹åˆ°getçš„å€¼æ˜¯nullï¼Œè€ŒGCè¿‡åï¼Œpollæ˜¯æœ‰å€¼çš„ã€‚

å› ä¸ºPhantomReferenceå¼•ç”¨çš„æ˜¯**éœ€è¦è¢«åƒåœ¾å›æ”¶çš„å¯¹è±¡**ï¼Œæ‰€ä»¥åœ¨ç±»çš„å®šä¹‰ä¸­ï¼Œgetä¸€ç›´éƒ½æ˜¯è¿”å›nullï¼š

```java
    public T get() {
        return null;
    }
```



**ã€æ€»ç»“ã€**

- **å¼ºå¼•ç”¨æ˜¯æœ€å¸¸è§çš„ç±»å‹**ï¼Œä½†å¦‚æœå†…å­˜ç©ºé—´ä¸è¶³ï¼Œå¯èƒ½ä¼šå¯¼è‡´OutOfMemoryErroré”™è¯¯ã€‚
- è½¯å¼•ç”¨çš„å¯¹è±¡åœ¨ç³»ç»Ÿå†…å­˜å³å°†æº¢å‡ºæ—¶ä¼šè¢«å›æ”¶ï¼Œé€‚ç”¨äº**ç¼“å­˜**ç­‰æƒ…å†µã€‚
- å¼±å¼•ç”¨çš„å¯¹è±¡æ— è®ºå½“å‰å†…å­˜ç©ºé—´è¶³å¤Ÿä¸å¦éƒ½ä¼šè¢«å›æ”¶ï¼Œé€‚ç”¨äºå®ç°å¯¹è±¡çš„**å•ä¾‹æ¨¡å¼**ç­‰ã€‚
- è™šå¼•ç”¨çš„ä¸»è¦ç›®çš„æ˜¯ä¸ºäº†èƒ½**æ”¶åˆ°ç³»ç»Ÿé€šçŸ¥**ï¼Œä»¥ä¾¿åœ¨å¯¹è±¡è¢«å›æ”¶æ—¶è¿›è¡Œç›¸åº”çš„å¤„ç†ã€‚

åœ¨ç¨‹åºè®¾è®¡ä¸­ä¸€èˆ¬å¾ˆå°‘ä½¿ç”¨å¼±å¼•ç”¨ä¸è™šå¼•ç”¨ï¼Œä½¿ç”¨è½¯å¼•ç”¨çš„æƒ…å†µè¾ƒå¤šï¼Œè¿™æ˜¯å› ä¸ºè½¯å¼•ç”¨å¯ä»¥åŠ é€Ÿ JVM å¯¹åƒåœ¾å†…å­˜çš„å›æ”¶é€Ÿåº¦ï¼Œå¯ä»¥ç»´æŠ¤ç³»ç»Ÿçš„è¿è¡Œå®‰å…¨ï¼Œé˜²æ­¢å†…å­˜æº¢å‡ºï¼ˆOOMï¼‰ç­‰é—®é¢˜çš„äº§ç”Ÿã€‚



-----



## 3. å€¼ä¼ é€’ vs å¼•ç”¨ä¼ é€’



### 3.1 å®šä¹‰



1. **å€¼ä¼ é€’**ï¼šæ–¹æ³•å‚æ•°ä¼ å…¥çš„æ˜¯**å‚æ•°çš„å¤‡ä»½**ï¼Œå¯¹å‚æ•°çš„ä¿®æ”¹å¹¶ä¸ä¼šå½±å“æœ¬èº«
2. **å¼•ç”¨ä¼ é€’**ï¼šæ–¹æ³•å‚æ•°ä¼ å…¥çš„éƒ½æ˜¯**å‚æ•°çš„å¼•ç”¨**ï¼Œå¯¹å‚æ•°çš„ä¿®æ”¹ä¼šå½±å“æœ¬èº«



> Javaçš„å‚æ•°ä¼ é€’æ˜¯å€¼ä¼ é€’è¿˜æ˜¯å¼•ç”¨ä¼ é€’?

å…ˆè¯´ç»“è®ºï¼šJavaæœ¬è´¨ä¸Šéƒ½æ˜¯**å€¼ä¼ é€’**



### 3.2 Javaå¯¹è±¡ç±»å‹

è¯´åˆ°å€¼ä¼ é€’å’Œå¼•ç”¨ä¼ é€’æˆ‘ä»¬ä¸å¾—ä¸æåˆ°ä¸¤ä¸ªæ¦‚å¿µï¼š**å€¼ç±»å‹å’Œå¼•ç”¨ç±»å‹**ã€‚



> åŸºæœ¬ç±»å‹æ˜¯å€¼ç±»å‹ã€‚JVMèµ‹å€¼æ—¶ï¼Œç›´æ¥åœ¨æ ˆä¸Šç”Ÿæˆå€¼

![java_value_type](https://coder-xieshijie-img-1253784930.cos.ap-beijing.myqcloud.com/img/2024/java_value_type_82a96745d68d77a41b65539621ee10f2.png)



> ç±»ã€æ¥å£ã€æ•°ç»„ã€å¯¹è±¡ã€åŸºæœ¬ç±»å‹çš„åŒ…è£…ç±»éƒ½æ˜¯å¼•ç”¨ç±»å‹ã€‚JVMèµ‹å€¼æ—¶ï¼Œåœ¨æ ˆä¸Šç”Ÿæˆå¼•ç”¨ï¼Œåœ¨å †ä¸­ç”Ÿæˆæ•°æ®

![java_reference_type](https://coder-xieshijie-img-1253784930.cos.ap-beijing.myqcloud.com/img/2024/java_reference_type_32c04e2a32c478533d94a8405dd88b36.png)



### 3.3 ä¸ºä»€ä¹ˆ?



å…ˆçœ‹ä¸€æ®µä»£ç 

```java
    @Test
    public void testReference() {
        Base base = new Base();
        base.setName("main");
        set2(base);
        System.out.println(base.getName());
    }

    private void set1(Base base) {
        base.setName("set1");
    }

    private void set2(Base base) {
        base = new Base();
        base.setName("set2");
    }
```

ä¸Šè¿°çš„æ–¹æ³•ï¼Œè°ƒç”¨set1çš„æ‰§è¡Œç»“æœæ˜¯ã€set1ã€‘ï¼Œè°ƒç”¨set2çš„æ‰§è¡Œç»“æœæ˜¯ã€mainã€‘



ç”±æ­¤å¯ä»¥çœ‹å‡ºï¼Œæ–¹æ³•å…¥å‚ä¼ å…¥çš„éƒ½æ˜¯**å‰¯æœ¬**

1. å½“æ˜¯åŸºæœ¬ç±»å‹æ—¶ï¼Œä¼ å…¥çš„æ˜¯åŸºæœ¬ç±»å‹çš„æ‹·è´å‰¯æœ¬ï¼Œä¿®æ”¹åŸºæœ¬ç±»å‹çš„ã€å…¥å‚ã€‘å¹¶ä¸ä¼šå½±å“ã€å®å‚ã€‘
2. å½“æ˜¯å¼•ç”¨ç±»å‹æ—¶ï¼Œä¼ å…¥çš„å¼•ç”¨ç±»å‹ä¾æ—§æ˜¯æ‹·è´å‰¯æœ¬ï¼Œä½†æ˜¯æ­¤æ—¶çš„å‰¯æœ¬æ˜¯**æ‹·è´åœ°å€**ï¼Œå› æ­¤ä¿®æ”¹å…¥å‚ä¼šå½±å“åˆ°å®ç°çš„å€¼ï¼Œå› æ­¤**å…¥å‚å’Œå®å‚çš„æŒ‡å‘éƒ½æ˜¯å †ä¸­åŒä¸€ä¸ªå†…å­˜åŒºåŸŸ**ï¼Œä¾‹å¦‚set1æ–¹æ³•ã€‚ä½†å½“ä¸ºå…¥å‚é‡æ–°**èµ‹å€¼ä¸€ä¸ªæ–°çš„åœ°å€**ï¼Œå¹¶åœ¨ä¿®æ”¹æ­¤**åœ°å€æŒ‡å‘çš„å†…å­˜åŒºåŸŸ**ï¼Œå°±ä¸ä¼šå½±å“å®å‚ä¸­çš„å€¼ï¼Œä¾‹å¦‚set2æ–¹æ³•ã€‚



**æ‰€ä»¥Javaæ˜¯å€¼ä¼ é€’**



----



> å‚è€ƒæ–‡ç« 

1. https://mp.weixin.qq.com/s/r5cMTmQjNwYwiX7pLx_52Q

2. [JAVAå¯¹è±¡çš„åˆ›å»ºåŠå†…å­˜åˆ†é…è¯¦è§£](https://www.cnblogs.com/xfeiyun/p/15600513.html)
3. [å¯¹è±¡å’Œå¼•ç”¨](https://alexyyek.github.io/2014/12/29/Reference/)

4. [ç†è§£javaå¯¹è±¡çš„å¼•ç”¨](https://www.cnblogs.com/better-farther-world2099/articles/17064423.html)

5. [ä¸€æ–‡è¯»æ‡‚javaä¸­çš„Referenceå’Œå¼•ç”¨ç±»å‹](https://www.cnblogs.com/flydean/p/java-reference-referencetype.html)

6. [è¿™ä¸€æ¬¡ï¼Œå½»åº•è§£å†³Javaçš„å€¼ä¼ é€’å’Œå¼•ç”¨ä¼ é€’](https://segmentfault.com/a/1190000016773324)

